import{_ as u}from "./preload-helper.a4192956.js";function _(l={}){const{immediate:f=!1,onNeedRefresh:c,onOfflineReady:s,onRegistered:g,onRegisteredSW:r,onRegisterError:p}=l;let i,n,o;const w=async(d=!0)=>{await n,await o?.()};async function m(){if("serviceWorker"in navigator){const{Workbox:d}=await u(()=>import("./workbox-window.prod.es5.a7b12eab.js"),[],import.meta.url);i=new d("/sw.js",{scope:"/",type:"classic"}),o=async()=>{await i?.messageSkipWaiting()};{let e=!1;const a=()=>{e=!0,i?.addEventListener("controlling", t=>{t.isUpdate&&window.location.reload()}),c?.()};i.addEventListener("installed", t=>{typeof t.isUpdate>"u"?typeof t.isExternal<"u"?t.isExternal?a():!e&&s?.():t.isExternal?window.location.reload():!e&&s?.():t.isUpdate||s?.()}),i.addEventListener("waiting",a),i.addEventListener("externalwaiting",a)}i.register({immediate:f}).then(e=>{r?r("/sw.js",e):g?.(e)}).catch(e=>{p?.(e)})}}return n=m(),w}export{_ as registerSW};
