{"version":3,"mappings":"0PAQA,SAASA,EAAWC,EAAU,GAAI,CAChC,KAAM,CACJ,UAAAC,EAAY,GACZ,cAAAC,EACA,eAAAC,EACA,aAAAC,EACA,eAAAC,EACA,gBAAAC,CACD,EAAGN,EACJ,IAAIO,EACAC,EACAC,EACJ,MAAMC,EAAsB,MAAOC,EAAc,KAAS,CACxD,MAAMH,EAEJ,MAAMC,IAAsB,CAElC,EACE,eAAeG,GAAW,CACxB,GAAI,kBAAmB,UAAW,CAOhC,GANAL,EAAK,MAAKM,EAAA,wBAAAC,CAAA,OAAC,QAAO,uCAAgB,EAAC,eAAAA,CAAA,uBAAC,KAAK,CAAC,CAAE,QAAAA,KACnC,IAAIA,EAAQ,SAAU,CAAE,MAAO,IAAK,KAAM,SAAS,CAAE,CAC7D,EAAE,MAAOC,GAAM,CACdT,IAAkBS,CAAC,CAE3B,CAAO,EACG,CAACR,EACH,OACFE,EAAyB,SAAY,CACnC,MAAMF,GAAI,oBAClB,EAYe,CACL,IAAIS,EAAsB,GAC1B,MAAMC,EAAwB,IAAM,CAClCD,EAAsB,GACtBT,GAAI,iBAAiB,cAAgBW,GAAU,CACzCA,EAAM,UACR,OAAO,SAAS,QAChC,CAAa,EACDhB,KACZ,EACUK,EAAG,iBAAiB,YAAcW,GAAU,CACtC,OAAOA,EAAM,SAAa,IACxB,OAAOA,EAAM,WAAe,IAC1BA,EAAM,WACRD,IAEA,CAACD,GAAuBb,MAEtBe,EAAM,WACR,OAAO,SAAS,SAEhB,CAACF,GAAuBb,MAElBe,EAAM,UAChBf,KAEd,CAAW,EACDI,EAAG,iBAAiB,UAAWU,CAAqB,EACpDV,EAAG,iBAAiB,kBAAmBU,CAAqB,CAC7D,CAEHV,EAAG,SAAS,CAAE,UAAAN,CAAW,GAAE,KAAMkB,GAAM,CACjCd,EACFA,EAAe,SAAUc,CAAC,EAE1Bf,IAAee,CAAC,CAC1B,CAAO,EAAE,MAAOJ,GAAM,CACdT,IAAkBS,CAAC,CAC3B,CAAO,CACF,CACF,CACD,OAAAP,EAAkBI,EAAQ,EACnBF,CACT,CAGA,SAASU,EAAcpB,EAAU,GAAI,CACnC,KAAM,CACJ,UAAAC,EAAY,GACZ,cAAAC,EACA,eAAAC,EACA,aAAAC,EACA,eAAAC,EACA,gBAAAC,CACD,EAAGN,EACEqB,EAAcC,EAAS,EAAK,EAC5BC,EAAeD,EAAS,EAAK,EAC7BZ,EAAsBX,EAAW,CACrC,UAAAE,EACA,gBAAiB,CACfsB,EAAa,IAAI,EAAI,EACrBpB,KACD,EACD,eAAgB,CACdkB,EAAY,IAAI,EAAI,EACpBnB,KACD,EACD,aAAAE,EACA,eAAAC,EACA,gBAAAC,CACJ,CAAG,EACD,MAAO,CACL,YAAAe,EACA,aAAAE,EACA,oBAAAb,CACJ,CACA,6QClHEc,EAAsEC,EAAAC,EAAAC,CAAA,8TAJtEH,EAEAC,EAAAG,EAAAD,CAAA,oGAHGE,EAAY,UAAAC,KAIPD,EAAa,UAAAE,wPAPb,kBAAAV,EAAa,oBAAAX,EAAqB,aAAAa,GAAiBH,EAAa,0DAI3B,IAAAV,EAAoB,EAAI","names":["registerSW","options","immediate","onNeedRefresh","onOfflineReady","onRegistered","onRegisteredSW","onRegisterError","wb","registerPromise","sendSkipWaitingMessage","updateServiceWorker","_reloadPage","register","__vitePreload","Workbox","e","onNeedRefreshCalled","showSkipWaitingPrompt","event","r","useRegisterSW","needRefresh","writable","offlineReady","insert_hydration","target","div","anchor","button","ctx","create_if_block","create_if_block_1"],"ignoreList":[],"sources":["../../../../../../../../../../../@vite-plugin-pwa/virtual:pwa-register/svelte","../../../../../../src/lib/components/PwaStatus.svelte"],"sourcesContent":["// src/client/build/svelte.ts\nimport { writable } from \"svelte/store\";\n\n// src/client/build/register.ts\nvar autoUpdateMode = \"false\";\nvar selfDestroying = \"false\";\nvar auto = autoUpdateMode === \"true\";\nvar autoDestroy = selfDestroying === \"true\";\nfunction registerSW(options = {}) {\n  const {\n    immediate = false,\n    onNeedRefresh,\n    onOfflineReady,\n    onRegistered,\n    onRegisteredSW,\n    onRegisterError\n  } = options;\n  let wb;\n  let registerPromise;\n  let sendSkipWaitingMessage;\n  const updateServiceWorker = async (_reloadPage = true) => {\n    await registerPromise;\n    if (!auto) {\n      await sendSkipWaitingMessage?.();\n    }\n  };\n  async function register() {\n    if (\"serviceWorker\" in navigator) {\n      wb = await import(\"workbox-window\").then(({ Workbox }) => {\n        return new Workbox(\"/sw.js\", { scope: \"/\", type: \"classic\" });\n      }).catch((e) => {\n        onRegisterError?.(e);\n        return void 0;\n      });\n      if (!wb)\n        return;\n      sendSkipWaitingMessage = async () => {\n        await wb?.messageSkipWaiting();\n      };\n      if (!autoDestroy) {\n        if (auto) {\n          wb.addEventListener(\"activated\", (event) => {\n            if (event.isUpdate || event.isExternal)\n              window.location.reload();\n          });\n          wb.addEventListener(\"installed\", (event) => {\n            if (!event.isUpdate) {\n              onOfflineReady?.();\n            }\n          });\n        } else {\n          let onNeedRefreshCalled = false;\n          const showSkipWaitingPrompt = () => {\n            onNeedRefreshCalled = true;\n            wb?.addEventListener(\"controlling\", (event) => {\n              if (event.isUpdate)\n                window.location.reload();\n            });\n            onNeedRefresh?.();\n          };\n          wb.addEventListener(\"installed\", (event) => {\n            if (typeof event.isUpdate === \"undefined\") {\n              if (typeof event.isExternal !== \"undefined\") {\n                if (event.isExternal)\n                  showSkipWaitingPrompt();\n                else\n                  !onNeedRefreshCalled && onOfflineReady?.();\n              } else {\n                if (event.isExternal)\n                  window.location.reload();\n                else\n                  !onNeedRefreshCalled && onOfflineReady?.();\n              }\n            } else if (!event.isUpdate) {\n              onOfflineReady?.();\n            }\n          });\n          wb.addEventListener(\"waiting\", showSkipWaitingPrompt);\n          wb.addEventListener(\"externalwaiting\", showSkipWaitingPrompt);\n        }\n      }\n      wb.register({ immediate }).then((r) => {\n        if (onRegisteredSW)\n          onRegisteredSW(\"/sw.js\", r);\n        else\n          onRegistered?.(r);\n      }).catch((e) => {\n        onRegisterError?.(e);\n      });\n    }\n  }\n  registerPromise = register();\n  return updateServiceWorker;\n}\n\n// src/client/build/svelte.ts\nfunction useRegisterSW(options = {}) {\n  const {\n    immediate = true,\n    onNeedRefresh,\n    onOfflineReady,\n    onRegistered,\n    onRegisteredSW,\n    onRegisterError\n  } = options;\n  const needRefresh = writable(false);\n  const offlineReady = writable(false);\n  const updateServiceWorker = registerSW({\n    immediate,\n    onOfflineReady() {\n      offlineReady.set(true);\n      onOfflineReady?.();\n    },\n    onNeedRefresh() {\n      needRefresh.set(true);\n      onNeedRefresh?.();\n    },\n    onRegistered,\n    onRegisteredSW,\n    onRegisterError\n  });\n  return {\n    needRefresh,\n    offlineReady,\n    updateServiceWorker\n  };\n}\nexport {\n  useRegisterSW\n};\n","<script>\n  // @ts-expect-error no types here\n  import { useRegisterSW } from \"virtual:pwa-register/svelte\";\n\n  const { needRefresh, updateServiceWorker, offlineReady } = useRegisterSW();\n</script>\n\n{#if $needRefresh}\n  <button title=\"Update ready\" on:click={() => updateServiceWorker(true)}\n    >Update <span class=\"icon\">update</span></button\n  >\n{:else if $offlineReady}\n  <div title=\"App can now be used offline\" class=\"icon\">offline_pin</div>\n{/if}\n\n<style lang=\"scss\">\n  button {\n    cursor: pointer;\n    color: var(--md-sys-color-on-background);\n    background: transparent;\n    border: none;\n  }\n</style>\n"],"file":"_app/immutable/chunks/PwaStatus.DCC9dwtH.js"}