import{s as x,y as X,i as M,n as w,f as y,C as he,k as F,ad as Y,ae as G,af as W,b as T,m as _,B as N,h as Z,U as _e,p as Ye,t as de,d as me,j as Ue,q as H,r as $e,Q as fe,D as Ke,a9 as j,I as Ge,e as Q,c as J,a7 as We,a as pe,g as ge,aa as we,a8 as je,ac as Me}from"../chunks/scheduler.CXEVs2ap.js";import{S as ee,i as te,g as ye,t as P,c as ke,a as z,e as ne,f as oe,m as ie,h as se,j as ue}from"../chunks/index.CTdcniaS.js";import{h as ze,u as He,g as Ze,c as Qe}from"../chunks/share-url.D1X9O966.js";import{s as Je}from"../chunks/share.DiRP5OJi.js";import{l as be,o as xe,a as Be,b as et,C as tt,t as nt}from"../chunks/Action.tNSJ0eLt.js";import{_ as ce}from"../chunks/preload-helper.Dch09mLN.js";import{e as U}from"../chunks/each.CypvCfon.js";import{b as ot,s as it}from"../chunks/connection.wgaIHNYB.js";import{A as st,S as at}from"../chunks/SharePopup.DIKEC4Cs.js";import{K as lt}from"../chunks/keymap-codes.DVdCLxHW.js";import{e as Se,f as Le,b as Ee}from"../chunks/index.C1YOBj0U.js";import{w as rt}from"../chunks/index.Lgv2TFSy.js";function ct(t){const e={name:t.name,size:[0,0],keys:[]};let o=0;for(const{row:n,offset:s}of t.col){let l=s?.[0]??0;o+=s?.[1]??0;let i=0;for(const r of n){const[a,u]=r.offset||[0,0],c=r.rotate||0;if("key"in r){const[h,f]=r.size??[1,1];e.keys.push({id:r.key,shape:"square",size:[h,f],pos:[l+a,o+u],cornerRadius:.1,rotate:c}),l+=h+a,i=Math.max(i,f+u)}else if("switch"in r){const h=l+a+1,f=o+u+1;for(const[p,m]of[r.switch.s,r.switch.w,r.switch.n,r.switch.e].entries())e.keys.push({id:m,shape:"quarter-circle",cornerRadius:0,size:[2,.6],pos:[h,f],rotate:90*p+45});e.keys.push({id:r.switch.d,shape:"square",cornerRadius:.5,size:[.8,.8],pos:[l+.6+a,o+.6+u],rotate:0}),l+=2+a,i=Math.max(i,2+u)}}o+=i,e.size[0]=Math.max(e.size[0],l)}return e.size[1]=o,e}function Pe(t,e,o){const n=t.slice();n[15]=e[o],n[31]=o;const s=n[6][n[31]]?.[n[0].id]??{action:0,isApplied:!0};n[16]=s.action,n[17]=s.isApplied;const l=lt.get(n[16])??{code:n[16]};n[18]=l.code,n[19]=l.icon,n[20]=l.id,n[21]=l.display,n[22]=l.title,n[23]=l.keyCode,n[24]=l.variant;const i=n[23]&&n[7].get(n[23]);n[25]=i;const r=(n[22]??n[20]??`0x${n[18].toString(16)}`)+(n[24]==="left"?" (left)":n[24]==="right"?" (right)":"");n[26]=r;const a=n[31]===n[8];n[27]=a;const u=[Math.sign(n[2][0])*(Math.abs(n[2][0])-n[10]*3)*n[15][0],Math.sign(n[2][1])*(Math.abs(n[2][1])-n[10]*3)*n[15][1]];n[28]=u;const c=!n[25]&&!!n[19];return n[29]=c,n}function Ie(t){let e=(t[25]||t[19]||t[21]||t[20]||`0x${t[18].toString(16)}`)+"",o;return{c(){o=de(e)},l(n){o=me(n,e)},m(n,s){M(n,o,s)},p(n,s){s[0]&193&&e!==(e=(n[25]||n[19]||n[21]||n[20]||`0x${n[18].toString(16)}`)+"")&&Ue(o,e)},d(n){n&&y(o)}}}function Ae(t){let e,o;return{c(){e=G("tspan"),o=de("•")},l(n){e=W(n,"tspan",{});var s=T(e);o=me(s,"•"),s.forEach(y)},m(n,s){M(n,e,s),Z(e,o)},d(n){n&&y(e)}}}function Ce(t){let e,o,n,s,l,i,r,a,u,c,h=`${t[4]}deg`,f,p,m=t[18]!==0&&Ie(t),d=!t[17]&&Ae();return{c(){e=G("text"),m&&m.c(),o=X(),d&&d.c(),this.h()},l(S){e=W(S,"text",{fill:!0,"font-weight":!0,"text-anchor":!0,"alignment-baseline":!0,x:!0,y:!0,"font-size":!0,"font-family":!0,opacity:!0,class:!0});var k=T(e);m&&m.l(k),o=X(),d&&d.l(k),k.forEach(y),this.h()},h(){_(e,"fill",n=t[17]?"currentcolor":"var(--md-sys-color-primary)"),_(e,"font-weight",s=t[17]?"":"bold"),_(e,"text-anchor","middle"),_(e,"alignment-baseline","central"),_(e,"x",l=t[3][0]+t[2][0]+(t[17]?0:t[9]/3)),_(e,"y",i=t[3][1]+t[2][1]),_(e,"font-size",r=t[1]*(t[29]?t[13]:t[9])),_(e,"font-family",a=t[29]?"Material Symbols Rounded":void 0),_(e,"opacity",u=t[27]?1:`var(--inactive-opacity, ${t[11]})`),_(e,"class","svelte-1pn6h4o"),N(e,"scale",t[27]?1:`var(--inactive-scale, ${t[12]})`),N(e,"translate",t[27]?"0 0 0":`${t[28][0]?.toPrecision(2)}px ${t[28][1]?.toPrecision(2)}px 0`),N(e,"rotate",h)},m(S,k){M(S,e,k),m&&m.m(e,null),Z(e,o),d&&d.m(e,null),f||(p=_e(c=Be.call(null,e,{title:t[26]})),f=!0)},p(S,k){t=S,t[18]!==0?m?m.p(t,k):(m=Ie(t),m.c(),m.m(e,o)):m&&(m.d(1),m=null),t[17]?d&&(d.d(1),d=null):d||(d=Ae(),d.c(),d.m(e,null)),k[0]&65&&n!==(n=t[17]?"currentcolor":"var(--md-sys-color-primary)")&&_(e,"fill",n),k[0]&65&&s!==(s=t[17]?"":"bold")&&_(e,"font-weight",s),k[0]&77&&l!==(l=t[3][0]+t[2][0]+(t[17]?0:t[9]/3))&&_(e,"x",l),k[0]&12&&i!==(i=t[3][1]+t[2][1])&&_(e,"y",i),k[0]&195&&r!==(r=t[1]*(t[29]?t[13]:t[9]))&&_(e,"font-size",r),k[0]&193&&a!==(a=t[29]?"Material Symbols Rounded":void 0)&&_(e,"font-family",a),k[0]&256&&u!==(u=t[27]?1:`var(--inactive-opacity, ${t[11]})`)&&_(e,"opacity",u),c&&Ye(c.update)&&k[0]&65&&c.update.call(null,{title:t[26]}),k[0]&256&&N(e,"scale",t[27]?1:`var(--inactive-scale, ${t[12]})`),k[0]&292&&N(e,"translate",t[27]?"0 0 0":`${t[28][0]?.toPrecision(2)}px ${t[28][1]?.toPrecision(2)}px 0`),k[0]&16&&h!==(h=`${t[4]}deg`)&&N(e,"rotate",h)},d(S){S&&y(e),m&&m.d(),d&&d.d(),f=!1,p()}}}function ut(t){let e,o=U(t[5]),n=[];for(let s=0;s<o.length;s+=1)n[s]=Ce(Pe(t,o,s));return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=X()},l(s){for(let l=0;l<n.length;l+=1)n[l].l(s);e=X()},m(s,l){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(s,l);M(s,e,l)},p(s,l){if(l[0]&16383){o=U(s[5]);let i;for(i=0;i<o.length;i+=1){const r=Pe(s,o,i);n[i]?n[i].p(r,l):(n[i]=Ce(r),n[i].c(),n[i].m(e.parentNode,e))}for(;i<n.length;i+=1)n[i].d(1);n.length=o.length}},i:w,o:w,d(s){s&&y(e),he(n,s)}}}function ft(t,e,o){let n,s,l;F(t,be,b=>o(6,n=b)),F(t,xe,b=>o(7,s=b));const{fontSize:i,margin:r,inactiveOpacity:a,inactiveScale:u,iconFontSize:c}=Y("visual-layout-config"),h=Y("active-layer");F(t,h,b=>o(8,l=b));let{key:f}=e,{fontSizeMultiplier:p=1}=e,{middle:m}=e,{pos:d}=e,{rotate:S}=e,{positions:k}=e;return t.$$set=b=>{"key"in b&&o(0,f=b.key),"fontSizeMultiplier"in b&&o(1,p=b.fontSizeMultiplier),"middle"in b&&o(2,m=b.middle),"pos"in b&&o(3,d=b.pos),"rotate"in b&&o(4,S=b.rotate),"positions"in b&&o(5,k=b.positions)},[f,p,m,d,S,k,n,s,l,i,r,a,u,c,h]}class Ve extends ee{constructor(e){super(),te(this,e,ft,ut,x,{key:0,fontSizeMultiplier:1,middle:2,pos:3,rotate:4,positions:5},null,[-1,-1])}}function ht(t){const e=t.slice(),o=e[7]/2;e[12]=o;const n=e[3]/2-e[7];e[13]=n;const s=e[13]-e[12];e[14]=s;const l=e[13]-e[2]+e[12]*2;e[15]=l;const i=e[15]-e[12];e[16]=i;const r=1.25;e[17]=r;const a=(e[1].rotate+45)*(Math.PI/180);e[18]=a;const u=Math.round((Math.abs(Math.cos(e[18]-Math.PI/2))+Number.EPSILON)*100)/100;e[19]=u;const c=Math.round((Math.abs(Math.sin(e[18]-Math.PI/2))+Number.EPSILON)*100)/100;e[20]=c;const h=e[13]-(e[13]-e[15])/2;e[21]=h;const f=Math.cos(e[18])*e[21];e[22]=f;const p=Math.sin(e[18])*e[21];return e[23]=p,e}function _t(t){let e,o,n=`rotateZ(${t[1].rotate}deg) translate(${t[12]}px, ${t[12]}px)`,s,l;return s=new Ve({props:{key:t[1],middle:[t[22],t[23]],pos:[t[5],t[4]],rotate:0,fontSizeMultiplier:t[17],positions:[[-t[20],-t[19]],[-t[19],-t[20]],[t[19],t[20]]]}}),{c(){e=G("path"),ne(s.$$.fragment),this.h()},l(i){e=W(i,"path",{d:!0,class:!0}),T(e).forEach(y),oe(s.$$.fragment,i),this.h()},h(){_(e,"d",o="M"+(t[5]+t[14])+","+t[4]+" a"+t[13]+","+t[13]+" 0 0,1 "+-t[14]+","+t[14]+" l0,"+-(t[14]-t[16])+" a"+t[15]+","+t[15]+" 0 0,0 "+t[16]+","+-t[16]+"z"),_(e,"class","svelte-ct6ehu"),N(e,"transform",n)},m(i,r){M(i,e,r),ie(s,i,r),l=!0},p(i,r){(!l||r&60&&o!==(o="M"+(i[5]+i[14])+","+i[4]+" a"+i[13]+","+i[13]+" 0 0,1 "+-i[14]+","+i[14]+" l0,"+-(i[14]-i[16])+" a"+i[15]+","+i[15]+" 0 0,0 "+i[16]+","+-i[16]+"z"))&&_(e,"d",o),r&2&&n!==(n=`rotateZ(${i[1].rotate}deg) translate(${i[12]}px, ${i[12]}px)`)&&N(e,"transform",n);const a={};r&2&&(a.key=i[1]),r&14&&(a.middle=[i[22],i[23]]),r&48&&(a.pos=[i[5],i[4]]),r&2&&(a.positions=[[-i[20],-i[19]],[-i[19],-i[20]],[i[19],i[20]]]),s.$set(a)},i(i){l||(z(s.$$.fragment,i),l=!0)},o(i){P(s.$$.fragment,i),l=!1},d(i){i&&y(e),se(s,i)}}}function dt(t){let e,o,n,s,l,i,r,a;return r=new Ve({props:{key:t[1],middle:[t[3]/2,t[2]/2],pos:[t[5],t[4]],rotate:-t[1].rotate,positions:[[-1,1],[-1,-1],[1,-1]]}}),{c(){e=G("rect"),ne(r.$$.fragment),this.h()},l(u){e=W(u,"rect",{x:!0,y:!0,rx:!0,width:!0,height:!0,"stroke-width":!0,class:!0}),T(e).forEach(y),oe(r.$$.fragment,u),this.h()},h(){_(e,"x",o=t[5]+t[7]),_(e,"y",n=t[4]+t[7]),_(e,"rx",s=t[1].cornerRadius*t[6]),_(e,"width",l=t[3]-t[7]*2),_(e,"height",i=t[2]-t[7]*2),_(e,"stroke-width",t[8]),_(e,"class","svelte-ct6ehu")},m(u,c){M(u,e,c),ie(r,u,c),a=!0},p(u,c){(!a||c&32&&o!==(o=u[5]+u[7]))&&_(e,"x",o),(!a||c&16&&n!==(n=u[4]+u[7]))&&_(e,"y",n),(!a||c&2&&s!==(s=u[1].cornerRadius*u[6]))&&_(e,"rx",s),(!a||c&8&&l!==(l=u[3]-u[7]*2))&&_(e,"width",l),(!a||c&4&&i!==(i=u[2]-u[7]*2))&&_(e,"height",i);const h={};c&2&&(h.key=u[1]),c&12&&(h.middle=[u[3]/2,u[2]/2]),c&48&&(h.pos=[u[5],u[4]]),c&2&&(h.rotate=-u[1].rotate),r.$set(h)},i(u){a||(z(r.$$.fragment,u),a=!0)},o(u){P(r.$$.fragment,u),a=!1},d(u){u&&y(e),se(r,u)}}}function mt(t){let e,o,n,s,l,i,r;const a=[dt,_t],u=[];function c(f,p){return f[1].shape==="square"?0:f[1].shape==="quarter-circle"?1:-1}function h(f,p){return p===1?ht(f):f}return~(o=c(t))&&(n=u[o]=a[o](h(t,o))),{c(){e=G("g"),n&&n.c(),this.h()},l(f){e=W(f,"g",{class:!0,role:!0,tabindex:!0});var p=T(e);n&&n.l(p),p.forEach(y),this.h()},h(){_(e,"class","key-group svelte-ct6ehu"),_(e,"role","button"),_(e,"tabindex",s=t[0]+1)},m(f,p){M(f,e,p),~o&&u[o].m(e,null),l=!0,i||(r=[H(e,"click",t[9]),H(e,"keypress",t[10]),H(e,"focusin",t[11])],i=!0)},p(f,[p]){let m=o;o=c(f),o===m?~o&&u[o].p(h(f,o),p):(n&&(ye(),P(u[m],1,1,()=>{u[m]=null}),ke()),~o?(n=u[o],n?n.p(h(f,o),p):(n=u[o]=a[o](h(f,o)),n.c()),z(n,1),n.m(e,null)):n=null),(!l||p&1&&s!==(s=f[0]+1))&&_(e,"tabindex",s)},i(f){l||(z(n),l=!0)},o(f){P(n),l=!1},d(f){f&&y(e),~o&&u[o].d(),i=!1,$e(r)}}}function pt(t,e,o){let n,s,l,i;const{scale:r,margin:a,strokeWidth:u}=Y("visual-layout-config");let{i:c}=e,{key:h}=e;function f(d){fe.call(this,t,d)}function p(d){fe.call(this,t,d)}function m(d){fe.call(this,t,d)}return t.$$set=d=>{"i"in d&&o(0,c=d.i),"key"in d&&o(1,h=d.key)},t.$$.update=()=>{t.$$.dirty&2&&o(5,n=h.pos[0]*r),t.$$.dirty&2&&o(4,s=h.pos[1]*r),t.$$.dirty&2&&o(3,l=h.size[0]*r),t.$$.dirty&2&&o(2,i=h.size[1]*r)},[c,h,i,l,s,n,r,a,u,f,p,m]}class gt extends ee{constructor(e){super(),te(this,e,pt,mt,x,{i:0,key:1})}}function Oe(t,e,o){const n=t.slice();return n[17]=e[o],n[19]=o,n}function Re(t){let e,o;function n(){return t[7](t[17])}function s(){return t[8](t[19])}function l(...i){return t[9](t[19],...i)}return e=new gt({props:{i:t[19],key:t[17]}}),e.$on("focusin",n),e.$on("click",s),e.$on("keypress",l),{c(){ne(e.$$.fragment)},l(i){oe(e.$$.fragment,i)},m(i,r){ie(e,i,r),o=!0},p(i,r){t=i;const a={};r&4&&(a.key=t[17]),e.$set(a)},i(i){o||(z(e.$$.fragment,i),o=!0)},o(i){P(e.$$.fragment,i),o=!1},d(i){se(e,i)}}}function yt(t){let e,o,n,s,l,i,r=U(t[2].keys),a=[];for(let c=0;c<r.length;c+=1)a[c]=Re(Oe(t,r,c));const u=c=>P(a[c],1,1,()=>{a[c]=null});return{c(){e=G("svg");for(let c=0;c<a.length;c+=1)a[c].c();this.h()},l(c){e=W(c,"svg",{class:!0,viewBox:!0});var h=T(e);for(let f=0;f<a.length;f+=1)a[f].l(h);h.forEach(y),this.h()},h(){_(e,"class","print svelte-1nciqmp"),_(e,"viewBox",o="0 0 "+t[2].size[0]*t[3]+" "+t[2].size[1]*t[3])},m(c,h){M(c,e,h);for(let f=0;f<a.length;f+=1)a[f]&&a[f].m(e,null);t[10](e),s=!0,l||(i=H(window,"keydown",t[4]),l=!0)},p(c,[h]){if(h&37){r=U(c[2].keys);let f;for(f=0;f<r.length;f+=1){const p=Oe(c,r,f);a[f]?(a[f].p(p,h),z(a[f],1)):(a[f]=Re(p),a[f].c(),z(a[f],1),a[f].m(e,null))}for(ye(),f=r.length;f<a.length;f+=1)u(f);ke()}(!s||h&4&&o!==(o="0 0 "+c[2].size[0]*c[3]+" "+c[2].size[1]*c[3]))&&_(e,"viewBox",o)},i(c){if(!s){for(let h=0;h<r.length;h+=1)z(a[h]);c&&Ke(()=>{s&&(n||(n=ue(e,Le,{y:48,easing:Se},!0)),n.run(1))}),s=!0}},o(c){a=a.filter(Boolean);for(let h=0;h<a.length;h+=1)P(a[h]);c&&(n||(n=ue(e,Le,{y:48,easing:Se},!1)),n.run(0)),s=!1},d(c){c&&y(e),he(a,c),t[10](null),c&&n&&n.end(),l=!1,i()}}}function Te(t){return[t.pos[0]+t.size[0]/2,t.pos[1]+t.size[1]/2]}function kt(t,e,o){let n;const{scale:s,margin:l,strokeWidth:i,fontSize:r,iconFontSize:a}=Y("visual-layout-config"),u=Y("active-layer");let{visualLayout:c}=e;function h(g,v){const q=g.pos[0]+l,O=g.pos[1]+l,D=q+g.size[0]-l,I=O+g.size[1]-l,A=v.pos[0]+l,R=v.pos[1]+l,L=A+v.size[0]-l,C=R+v.size[1]-l,E=L<q,$=D<A,K=C<O,B=I<R;return B&&E?Math.sqrt((q-L)**2+(I-R)**2):E&&K?Math.sqrt((q-L)**2+(O-C)**2):K&&$?Math.sqrt((D-A)**2+(O-C)**2):$&&B?Math.sqrt((D-A)**2+(I-R)**2):E?q-L:$?A-D:K?O-C:B?R-I:0}function f(g){if(g.altKey||g.ctrlKey||g.shiftKey||g.metaKey)return;let v;const q=Math.PI;if(g.key==="ArrowUp")v=Math.PI;else if(g.key==="ArrowDown")v=0;else if(g.key==="ArrowRight")v=Math.PI/2;else if(g.key==="ArrowLeft")v=-Math.PI/2;else return;g.preventDefault(),m||d.firstChild.focus();const[O,D]=Te(m);let I=1/0,A=0,R=!1;for(const[C,E]of n.keys.entries()){if(E===m)continue;const[$,K]=Te(E),B=$-O,ae=K-D,le=Math.atan2(B,ae),re=h(E,m),V=Math.abs(v-le);(R?V>Number.EPSILON:V>=q)||re>I||(I=re,A=C,R=V<=Number.EPSILON)}const L=d.children.item(A);L instanceof SVGGElement&&L.focus()}function p(g){const v=n.keys[g];if(!v)return;const q=d.children.item(g),O=j(be)[j(u)]?.[v.id],D=j(ot)[j(u)]?.[v.id],I=new st({target:document.body,props:{currentAction:D,nextAction:O?.isApplied?void 0:O?.action}}),A=document.querySelector("dialog > div"),R=document.querySelector("dialog"),L=A.getBoundingClientRect(),C=q.getBoundingClientRect(),E=.5,$=`${1-E*(1-C.width/L.width)} ${1-E*(1-C.height/L.height)}`,K=`${E*(C.x-L.x)}px ${E*(C.y-L.y)}px`,ae={duration:150,easing:"ease"},le=A.animate([{scale:$,translate:K},{translate:"0 0",scale:"1"}],ae),re=R.animate([{opacity:0},{opacity:1}],ae);async function V(){le.reverse(),re.reverse(),await le.finished,I.$destroy()}I.$on("close",V),I.$on("select",({detail:Xe})=>{et.update(ve=>(ve.push({type:tt.Layout,id:v.id,layer:j(u),action:Xe}),ve)),V()})}let m,d;const S=g=>o(0,m=g),k=g=>p(g),b=(g,{key:v})=>{v==="Enter"&&p(g)};function Fe(g){Ge[g?"unshift":"push"](()=>{d=g,o(1,d)})}return t.$$set=g=>{"visualLayout"in g&&o(6,c=g.visualLayout)},t.$$.update=()=>{t.$$.dirty&64&&o(2,n=ct(c))},[m,d,n,s,f,p,c,S,k,b,Fe]}class bt extends ee{constructor(e){super(),te(this,e,kt,yt,x,{visualLayout:6})}}function qe(t,e,o){const n=t.slice();return n[8]=e[o][0],n[9]=e[o][1],n[10]=e[o][2],n}function De(t){let e,o,n,s={ctx:t,current:null,token:null,hasCatch:!1,pending:Mt,then:wt,catch:vt,value:7,blocks:[,,,]};return ze(o=t[4][t[0]](),s),{c(){e=X(),s.block.c()},l(l){e=X(),s.block.l(l)},m(l,i){M(l,e,i),s.block.m(l,s.anchor=i),s.mount=()=>e.parentNode,s.anchor=e,n=!0},p(l,i){t=l,s.ctx=t,i&1&&o!==(o=t[4][t[0]]())&&ze(o,s)||He(s,t,i)},i(l){n||(z(s.block),n=!0)},o(l){for(let i=0;i<3;i+=1){const r=s.blocks[i];P(r)}n=!1},d(l){l&&y(e),s.block.d(l),s.token=null,s=null}}}function vt(t){return{c:w,l:w,m:w,p:w,i:w,o:w,d:w}}function wt(t){let e,o,n,s,l,i=U(t[3]),r=[];for(let a=0;a<i.length;a+=1)r[a]=Ne(qe(t,i,a));return s=new bt({props:{visualLayout:t[7]}}),{c(){e=Q("fieldset");for(let a=0;a<r.length;a+=1)r[a].c();n=pe(),ne(s.$$.fragment),this.h()},l(a){e=J(a,"FIELDSET",{class:!0});var u=T(e);for(let c=0;c<r.length;c+=1)r[c].l(u);u.forEach(y),n=ge(a),oe(s.$$.fragment,a),this.h()},h(){_(e,"class","svelte-mcava")},m(a,u){M(a,e,u);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(e,null);M(a,n,u),ie(s,a,u),l=!0},p(a,u){if(u&10){i=U(a[3]);let h;for(h=0;h<i.length;h+=1){const f=qe(a,i,h);r[h]?r[h].p(f,u):(r[h]=Ne(f),r[h].c(),r[h].m(e,null))}for(;h<r.length;h+=1)r[h].d(1);r.length=i.length}const c={};u&1&&(c.visualLayout=a[7]),s.$set(c)},i(a){l||(a&&Ke(()=>{l&&(o||(o=ue(e,Ee,{},!0)),o.run(1))}),z(s.$$.fragment,a),l=!0)},o(a){a&&(o||(o=ue(e,Ee,{},!1)),o.run(0)),P(s.$$.fragment,a),l=!1},d(a){a&&(y(e),y(n)),he(r,a),a&&o&&o.end(),se(s,a)}}}function Ne(t){let e,o=t[9]+"",n,s,l,i;function r(){return t[6](t[10])}return{c(){e=Q("button"),n=de(o),s=pe(),this.h()},l(a){e=J(a,"BUTTON",{class:!0});var u=T(e);n=me(u,o),s=ge(u),u.forEach(y),this.h()},h(){_(e,"class","icon svelte-mcava"),we(e,"active",t[1]===t[10])},m(a,u){M(a,e,u),Z(e,n),Z(e,s),l||(i=[_e(Be.call(null,e,{title:t[8],shortcut:`alt+${t[10]+1}`})),H(e,"click",r)],l=!0)},p(a,u){t=a,u&10&&we(e,"active",t[1]===t[10])},d(a){a&&y(e),l=!1,$e(i)}}}function Mt(t){return{c:w,l:w,m:w,p:w,i:w,o:w,d:w}}function zt(t){let e,o,n=t[0]&&De(t);return{c(){e=Q("div"),n&&n.c(),this.h()},l(s){e=J(s,"DIV",{class:!0});var l=T(e);n&&n.l(l),l.forEach(y),this.h()},h(){_(e,"class","container svelte-mcava")},m(s,l){M(s,e,l),n&&n.m(e,null),o=!0},p(s,[l]){s[0]?n?(n.p(s,l),l&1&&z(n,1)):(n=De(s),n.c(),z(n,1),n.m(e,null)):n&&(ye(),P(n,1,1,()=>{n=null}),ke())},i(s){o||(z(n),o=!0)},o(s){P(n),o=!1},d(s){s&&y(e),n&&n.d()}}}function St(t,e,o){let n,s,l;F(t,it,c=>o(5,s=c));const i=Y("active-layer");F(t,i,c=>o(1,l=c));const r=[["Numeric Layer","123",1],["Primary Layer","abc",0],["Function Layer","function",2]],a={ONE:()=>ce(()=>import("../chunks/one.BdTwjj45.js"),[],import.meta.url).then(c=>c.default),TWO:()=>ce(()=>import("../chunks/one.BdTwjj45.js"),[],import.meta.url).then(c=>c.default),LITE:()=>ce(()=>import("../chunks/lite.Bns_Dn1U.js"),[],import.meta.url).then(c=>c.default),X:()=>ce(()=>import("../chunks/103-key.DDCbGLWx.js"),[],import.meta.url).then(c=>c.default)},u=c=>We(i,l=c,l);return t.$$.update=()=>{t.$$.dirty&32&&o(0,n=s?.device)},[n,l,i,r,a,s,u]}class Lt extends ee{constructor(e){super(),te(this,e,St,zt,x,{})}}const{window:Et}=Ze;function Pt(t){let e,o,n,s,l,i,r;return s=new Lt({}),{c(){e=Q("meta"),o=pe(),n=Q("section"),ne(s.$$.fragment),this.h()},l(a){const u=je("svelte-ghuqel",document.head);e=J(u,"META",{name:!0,content:!0}),u.forEach(y),o=ge(a),n=J(a,"SECTION",{class:!0});var c=T(n);oe(s.$$.fragment,c),c.forEach(y),this.h()},h(){document.title="Layout Manager - CharaChorder Device Manager",_(e,"name","description"),_(e,"content","Edit your layout"),_(n,"class","svelte-160295n")},m(a,u){Z(document.head,e),M(a,o,u),M(a,n,u),ie(s,n,null),l=!0,i||(r=_e(Je.call(null,Et,t[0])),i=!0)},p:w,i(a){l||(z(s.$$.fragment,a),l=!0)},o(a){P(s.$$.fragment,a),l=!1},d(a){a&&(y(o),y(n)),y(e),se(s),i=!1,r()}}}function It(t,e,o){let n;F(t,be,l=>o(1,n=l));async function s(l){const i=new URL(window.location.href);i.searchParams.set("import",await Qe({charaVersion:1,type:"layout",device:"one",layout:n.map(a=>a.map(u=>u.action))})),await navigator.clipboard.writeText(i.toString());let r;nt(l.target,{onCreate(a){const u=a.popper.querySelector(".tippy-content");r=new at({target:u})},onHidden(a){a.destroy()},onDestroy(){r.$destroy()}}).show()}return Me("visual-layout-config",{scale:50,inactiveScale:.5,inactiveOpacity:.4,strokeWidth:1,margin:5,fontSize:9,iconFontSize:14}),Me("active-layer",rt(0)),[s]}class Ft extends ee{constructor(e){super(),te(this,e,It,Pt,x,{})}}export{Ft as component};
//# sourceMappingURL=7.Va0aeRtl.js.map
