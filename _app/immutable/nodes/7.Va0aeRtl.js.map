{"version":3,"mappings":"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","names":["compileLayout","layout","compiled","y","row","offset","x","maxHeight","info","ox","oy","rotate","width","height","cx","cy","i","id","constants_0","child_ctx","constants_1","KEYMAP_CODES","constants_2","constants_4","constants_6","ctx","set_data","t","t_value","insert_hydration","target","tspan","anchor","if_block0","create_if_block_1","create_if_block","attr","text_1","text_1_x_value","text_1_y_value","text_1_font_size_value","set_style","dispose","action_destroyer","action_action","action","dirty","is_function","fontSize","margin","inactiveOpacity","inactiveScale","iconFontSize","getContext","activeLayer","key","$$props","fontSizeMultiplier","middle","pos","positions","constants_3","constants_9","constants_10","constants_11","style_transform","path","keytext_changes","rect","rect_x_value","rect_y_value","current","g","g_tabindex_value","scale","strokeWidth","$$invalidate","posX","posY","sizeX","sizeY","each_value","ensure_array_like","svg","svg_viewBox_value","each_blocks","svg_transition","create_bidirectional_transition","fly","expoOut","getCenter","visualLayout","getDistance","a","b","x1","y1","x1b","y1b","x2","y2","x2b","y2b","left","right","bottom","top","navigate","event","wantedAngle","angleThreshold","focusKey","groupParent","focusX","focusY","bestDistance","bestCandidate","isOptimalAngle","layoutInfo","keyX","keyY","deltaX","deltaY","angle","distance","angleDelta","node","edit","index","keyInfo","clickedGroup","nextAction","get","currentAction","deviceLayout","component","ActionSelector","dialog","backdrop","dialogRect","groupRect","dialogScale","dialogTranslate","options","dialogAnimation","backdropAnimation","closed","detail","changes","ChangeType","focusin_handler","click_handler","$$value","handle_promise","promise","fieldset","toggle_class","button","div","layers","layouts","__vitePreload","it","value","set_store_value","$activeLayer","device","$serialPort","append_hydration","meta","section","shareLayout","url","charaFileToUriComponent","$layout","shareComponent","tippy","instance","SharePopup","setContext","writable"],"ignoreList":[],"sources":["../../../../../../src/lib/serialization/visual-layout.ts","../../../../../../src/lib/components/layout/KeyText.svelte","../../../../../../src/lib/components/layout/KeyboardKey.svelte","../../../../../../src/lib/components/layout/GenericLayout.svelte","../../../../../../src/lib/components/layout/Layout.svelte","../../../../../../src/routes/(app)/config/layout/+page.svelte"],"sourcesContent":["export interface VisualLayout {\n  name: string;\n  col: VisualLayoutRow[];\n}\n\ninterface Positionable {\n  offset: [number, number];\n  rotate: number;\n}\n\nexport interface VisualLayoutRow extends Positionable {\n  row: Array<VisualLayoutKey | VisualLayoutSwitch>;\n}\n\nexport interface VisualLayoutKey extends Positionable {\n  key: number;\n  size?: [number, number];\n}\n\nexport interface VisualLayoutSwitch extends Positionable {\n  switch: {\n    n: number;\n    e: number;\n    w: number;\n    s: number;\n    d: number;\n  };\n}\n\nexport interface CompiledLayout {\n  name: string;\n  size: [number, number];\n  keys: CompiledLayoutKey[];\n}\n\nexport interface CompiledLayoutKey {\n  id: number;\n  shape: \"quarter-circle\" | \"square\";\n  cornerRadius: number;\n  size: [number, number];\n  pos: [number, number];\n  rotate: number;\n}\n\nexport function compileLayout(layout: VisualLayout): CompiledLayout {\n  const compiled: CompiledLayout = {\n    name: layout.name,\n    size: [0, 0],\n    keys: [],\n  };\n\n  let y = 0;\n  for (const { row, offset } of layout.col) {\n    let x = offset?.[0] ?? 0;\n    y += offset?.[1] ?? 0;\n    let maxHeight = 0;\n    for (const info of row) {\n      const [ox, oy] = info.offset || [0, 0];\n      const rotate = info.rotate || 0;\n      if (\"key\" in info) {\n        const [width, height] = info.size ?? [1, 1];\n\n        compiled.keys.push({\n          id: info.key,\n          shape: \"square\",\n          size: [width, height],\n          pos: [x + ox, y + oy],\n          cornerRadius: 0.1,\n          rotate,\n        });\n\n        x += width + ox;\n        maxHeight = Math.max(maxHeight, height + oy);\n      } else if (\"switch\" in info) {\n        const cx = x + ox + 1;\n        const cy = y + oy + 1;\n        for (const [i, id] of [\n          info.switch.s,\n          info.switch.w,\n          info.switch.n,\n          info.switch.e,\n        ].entries()) {\n          compiled.keys.push({\n            id,\n            shape: \"quarter-circle\",\n            cornerRadius: 0,\n            size: [2, 0.6],\n            pos: [cx, cy],\n            rotate: 90 * i + 45,\n          });\n        }\n        compiled.keys.push({\n          id: info.switch.d,\n          shape: \"square\",\n          cornerRadius: 0.5,\n          size: [0.8, 0.8],\n          pos: [x + 0.6 + ox, y + 0.6 + oy],\n          rotate: 0,\n        });\n\n        x += 2 + ox;\n        maxHeight = Math.max(maxHeight, 2 + oy);\n      }\n    }\n    y += maxHeight;\n    compiled.size[0] = Math.max(compiled.size[0], x);\n  }\n  compiled.size[1] = y;\n\n  return compiled;\n}\n","<script lang=\"ts\">\n  import { getContext } from \"svelte\";\n  import type { Writable } from \"svelte/store\";\n  import type { VisualLayoutConfig } from \"$lib/components/layout/visual-layout\";\n  import type { CompiledLayoutKey } from \"$lib/serialization/visual-layout\";\n  import { layout } from \"$lib/undo-redo.js\";\n  import { osLayout } from \"$lib/os-layout.js\";\n  import { KEYMAP_CODES } from \"$lib/serial/keymap-codes\";\n  import { action } from \"$lib/title\";\n\n  const { fontSize, margin, inactiveOpacity, inactiveScale, iconFontSize } =\n    getContext<VisualLayoutConfig>(\"visual-layout-config\");\n  const activeLayer = getContext<Writable<number>>(\"active-layer\");\n\n  export let key: CompiledLayoutKey;\n  export let fontSizeMultiplier = 1;\n\n  export let middle: [number, number];\n  export let pos: [number, number];\n  export let rotate: number;\n\n  export let positions: [[number, number], [number, number], [number, number]];\n</script>\n\n{#each positions as position, layer}\n  {@const { action: actionId, isApplied } = $layout[layer]?.[key.id] ?? {\n    action: 0,\n    isApplied: true,\n  }}\n  {@const { code, icon, id, display, title, keyCode, variant } =\n    KEYMAP_CODES.get(actionId) ?? { code: actionId }}\n  {@const dynamicMapping = keyCode && $osLayout.get(keyCode)}\n  {@const tooltip =\n    (title ?? id ?? `0x${code.toString(16)}`) +\n    (variant === \"left\" ? \" (left)\" : variant === \"right\" ? \" (right)\" : \"\")}\n  {@const isActive = layer === $activeLayer}\n  {@const direction = [\n    Math.sign(middle[0]) * (Math.abs(middle[0]) - margin * 3) * position[0],\n    Math.sign(middle[1]) * (Math.abs(middle[1]) - margin * 3) * position[1],\n  ]}\n  {@const hasIcon = !dynamicMapping && !!icon}\n  <text\n    fill={isApplied ? \"currentcolor\" : \"var(--md-sys-color-primary)\"}\n    font-weight={isApplied ? \"\" : \"bold\"}\n    text-anchor=\"middle\"\n    alignment-baseline=\"central\"\n    x={pos[0] + middle[0] + (isApplied ? 0 : fontSize / 3)}\n    y={pos[1] + middle[1]}\n    font-size={fontSizeMultiplier * (hasIcon ? iconFontSize : fontSize)}\n    font-family={hasIcon ? \"Material Symbols Rounded\" : undefined}\n    opacity={isActive ? 1 : `var(--inactive-opacity, ${inactiveOpacity})`}\n    style:scale={isActive ? 1 : `var(--inactive-scale, ${inactiveScale})`}\n    style:translate={isActive\n      ? \"0 0 0\"\n      : `${direction[0]?.toPrecision(2)}px ${direction[1]?.toPrecision(2)}px 0`}\n    style:rotate=\"{rotate}deg\"\n    use:action={{ title: tooltip }}\n  >\n    {#if code !== 0}\n      {dynamicMapping || icon || display || id || `0x${code.toString(16)}`}\n    {/if}\n    {#if !isApplied}\n      <tspan>•</tspan>\n    {/if}\n  </text>\n{/each}\n\n<style lang=\"scss\">\n  $focus-transition: 10ms;\n  $transition: 200ms;\n\n  text {\n    will-change: translate, scale;\n    user-select: none;\n    transform-origin: center;\n    transform-box: fill-box;\n    transition:\n      fill #{$focus-transition} ease,\n      opacity #{$transition} ease,\n      translate #{$transition} ease,\n      scale #{$transition} ease;\n\n    @media (prefers-contrast: more) {\n      --inactive-opacity: 0.8;\n      --inactive-scale: 0.7;\n    }\n  }\n\n  text:focus-within {\n    outline: none;\n  }\n</style>\n","<script lang=\"ts\">\n  import type { CompiledLayoutKey } from \"$lib/serialization/visual-layout\";\n  import { getContext } from \"svelte\";\n  import type { VisualLayoutConfig } from \"./visual-layout.js\";\n  import KeyText from \"$lib/components/layout/KeyText.svelte\";\n\n  const { scale, margin, strokeWidth } = getContext<VisualLayoutConfig>(\n    \"visual-layout-config\",\n  );\n  export let i: number;\n  export let key: CompiledLayoutKey;\n\n  $: posX = key.pos[0] * scale;\n  $: posY = key.pos[1] * scale;\n  $: sizeX = key.size[0] * scale;\n  $: sizeY = key.size[1] * scale;\n</script>\n\n<g\n  class=\"key-group\"\n  on:click\n  on:keypress\n  on:focusin\n  role=\"button\"\n  tabindex={i + 1}\n>\n  {#if key.shape === \"square\"}\n    <rect\n      x={posX + margin}\n      y={posY + margin}\n      rx={key.cornerRadius * scale}\n      width={sizeX - margin * 2}\n      height={sizeY - margin * 2}\n      stroke-width={strokeWidth}\n    />\n    <KeyText\n      {key}\n      middle={[sizeX / 2, sizeY / 2]}\n      pos={[posX, posY]}\n      rotate={-key.rotate}\n      positions={[\n        [-1, 1],\n        [-1, -1],\n        [1, -1],\n      ]}\n    />\n  {:else if key.shape === \"quarter-circle\"}\n    {@const innerMargin = margin / 2}\n    {@const r1 = sizeX / 2 - margin}\n    {@const p1 = r1 - innerMargin}\n    {@const r2 = r1 - sizeY + innerMargin * 2}\n    {@const p2 = r2 - innerMargin}\n    {@const multiplier = 1.25}\n\n    {@const rotateRad = (key.rotate + 45) * (Math.PI / 180)}\n    {@const rotX =\n      Math.round(\n        (Math.abs(Math.cos(rotateRad - Math.PI / 2)) + Number.EPSILON) * 100,\n      ) / 100}\n    {@const rotY =\n      Math.round(\n        (Math.abs(Math.sin(rotateRad - Math.PI / 2)) + Number.EPSILON) * 100,\n      ) / 100}\n\n    {@const rc = r1 - (r1 - r2) / 2}\n    {@const middleX = Math.cos(rotateRad) * rc}\n    {@const middleY = Math.sin(rotateRad) * rc}\n    <path\n      style:transform=\"rotateZ({key.rotate}deg) translate({innerMargin}px, {innerMargin}px)\"\n      d=\"M{posX + p1},{posY} a{r1},{r1} 0 0,1 {-p1},{p1} l0,{-(\n        p1 - p2\n      )} a{r2},{r2} 0 0,0 {p2},{-p2}z\"\n    />\n    <KeyText\n      {key}\n      middle={[middleX, middleY]}\n      pos={[posX, posY]}\n      rotate={0}\n      fontSizeMultiplier={multiplier}\n      positions={[\n        [-rotY, -rotX],\n        [-rotX, -rotY],\n        [rotX, rotY],\n      ]}\n    />\n  {/if}\n</g>\n\n<style lang=\"scss\">\n  $focus-transition: 10ms;\n  $transition: 200ms;\n\n  rect {\n    transform-origin: center;\n    transform-box: fill-box;\n  }\n\n  path,\n  g {\n    transform-origin: top left;\n    transform-box: fill-box;\n  }\n\n  path,\n  rect {\n    fill: var(--md-sys-color-background);\n    fill-opacity: 0;\n    stroke: currentcolor;\n  }\n\n  path {\n    fill: currentcolor;\n    fill-opacity: 0;\n    stroke-opacity: 0.3;\n  }\n\n  g:hover {\n    cursor: default;\n    opacity: 0.6;\n    transition: opacity #{$transition} ease;\n  }\n\n  g:focus-within {\n    color: var(--md-sys-color-primary);\n    outline: none;\n\n    > path,\n    > rect {\n      fill: currentcolor;\n      fill-opacity: 0.2;\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import { compileLayout } from \"$lib/serialization/visual-layout\";\n  import type {\n    VisualLayout,\n    CompiledLayoutKey,\n  } from \"$lib/serialization/visual-layout\";\n  import { deviceLayout } from \"$lib/serial/connection\";\n  import { dev } from \"$app/environment\";\n  import ActionSelector from \"$lib/components/layout/ActionSelector.svelte\";\n  import { get } from \"svelte/store\";\n  import type { Writable } from \"svelte/store\";\n  import KeyboardKey from \"$lib/components/layout/KeyboardKey.svelte\";\n  import { getContext } from \"svelte\";\n  import type { VisualLayoutConfig } from \"./visual-layout.js\";\n  import { changes, ChangeType, layout } from \"$lib/undo-redo\";\n  import { fly } from \"svelte/transition\";\n  import { expoOut } from \"svelte/easing\";\n\n  const { scale, margin, strokeWidth, fontSize, iconFontSize } =\n    getContext<VisualLayoutConfig>(\"visual-layout-config\");\n  const activeLayer = getContext<Writable<number>>(\"active-layer\");\n\n  if (dev) {\n    // you have absolutely no idea what a difference this makes for performance\n    console.assert(scale % 1 === 0, \"Scale must be an integer\");\n    console.assert((scale / 2) % 1 === 0, \"Scale must be divisible by 2\");\n    console.assert(strokeWidth % 1 === 0, \"Stroke must be an integer\");\n    console.assert(margin % 1 === 0, \"Margin must be an integer\");\n    console.assert(fontSize % 1 === 0, \"Font size must be an integer\");\n    console.assert(iconFontSize % 1 === 0, \"Icon font size must be an integer\");\n  }\n\n  export let visualLayout: VisualLayout;\n  $: layoutInfo = compileLayout(visualLayout);\n\n  function getCenter(key: CompiledLayoutKey): [x: number, y: number] {\n    return [key.pos[0] + key.size[0] / 2, key.pos[1] + key.size[1] / 2];\n  }\n\n  function getDistance(a: CompiledLayoutKey, b: CompiledLayoutKey) {\n    const x1 = a.pos[0] + margin;\n    const y1 = a.pos[1] + margin;\n    const x1b = x1 + a.size[0] - margin;\n    const y1b = y1 + a.size[1] - margin;\n    const x2 = b.pos[0] + margin;\n    const y2 = b.pos[1] + margin;\n    const x2b = x2 + b.size[0] - margin;\n    const y2b = y2 + b.size[1] - margin;\n\n    const left = x2b < x1;\n    const right = x1b < x2;\n    const bottom = y2b < y1;\n    const top = y1b < y2;\n\n    return top && left\n      ? Math.sqrt((x1 - x2b) ** 2 + (y1b - y2) ** 2)\n      : left && bottom\n        ? Math.sqrt((x1 - x2b) ** 2 + (y1 - y2b) ** 2)\n        : bottom && right\n          ? Math.sqrt((x1b - x2) ** 2 + (y1 - y2b) ** 2)\n          : right && top\n            ? Math.sqrt((x1b - x2) ** 2 + (y1b - y2) ** 2)\n            : left\n              ? x1 - x2b\n              : right\n                ? x2 - x1b\n                : bottom\n                  ? y1 - y2b\n                  : top\n                    ? y2 - y1b\n                    : 0;\n  }\n\n  function navigate(event: KeyboardEvent) {\n    if (event.altKey || event.ctrlKey || event.shiftKey || event.metaKey)\n      return;\n\n    let wantedAngle: number;\n    const angleThreshold = Math.PI;\n\n    if (event.key === \"ArrowUp\") wantedAngle = Math.PI;\n    else if (event.key === \"ArrowDown\") wantedAngle = 0;\n    else if (event.key === \"ArrowRight\") wantedAngle = Math.PI / 2;\n    else if (event.key === \"ArrowLeft\") wantedAngle = -Math.PI / 2;\n    else return;\n\n    event.preventDefault();\n    if (!focusKey) (groupParent.firstChild as SVGGElement).focus();\n    const [focusX, focusY] = getCenter(focusKey);\n\n    let bestDistance = Infinity;\n    let bestCandidate = 0;\n    let isOptimalAngle = false;\n\n    for (const [i, key] of layoutInfo.keys.entries()) {\n      if (key === focusKey) continue;\n      const [keyX, keyY] = getCenter(key);\n      const deltaX = keyX - focusX;\n      const deltaY = keyY - focusY;\n      const angle = Math.atan2(deltaX, deltaY);\n      const distance = getDistance(key, focusKey);\n\n      const angleDelta = Math.abs(wantedAngle - angle);\n\n      if (\n        isOptimalAngle\n          ? angleDelta > Number.EPSILON\n          : angleDelta >= angleThreshold\n      )\n        continue;\n      if (distance > bestDistance) continue;\n\n      bestDistance = distance;\n      bestCandidate = i;\n      isOptimalAngle = angleDelta <= Number.EPSILON;\n    }\n\n    const node = groupParent.children.item(bestCandidate);\n    if (node instanceof SVGGElement) {\n      node.focus();\n    }\n  }\n\n  function edit(index: number) {\n    const keyInfo = layoutInfo.keys[index];\n    if (!keyInfo) return;\n    const clickedGroup = groupParent.children.item(index) as SVGGElement;\n    const nextAction = get(layout)[get(activeLayer)]?.[keyInfo.id];\n    const currentAction = get(deviceLayout)[get(activeLayer)]?.[keyInfo.id];\n    const component = new ActionSelector({\n      target: document.body,\n      props: {\n        currentAction,\n        nextAction: nextAction?.isApplied ? undefined : nextAction?.action,\n      },\n    });\n    const dialog = document.querySelector(\"dialog > div\") as HTMLDivElement;\n    const backdrop = document.querySelector(\"dialog\") as HTMLDialogElement;\n    const dialogRect = dialog.getBoundingClientRect();\n    const groupRect = clickedGroup.getBoundingClientRect();\n\n    const scale = 0.5;\n    const dialogScale = `${1 - scale * (1 - groupRect.width / dialogRect.width)} ${\n      1 - scale * (1 - groupRect.height / dialogRect.height)\n    }`;\n    const dialogTranslate = `${scale * (groupRect.x - dialogRect.x)}px ${\n      scale * (groupRect.y - dialogRect.y)\n    }px`;\n\n    const duration = 150;\n    const options = { duration, easing: \"ease\" };\n    const dialogAnimation = dialog.animate(\n      [\n        { scale: dialogScale, translate: dialogTranslate },\n        { translate: \"0 0\", scale: \"1\" },\n      ],\n      options,\n    );\n    const backdropAnimation = backdrop.animate(\n      [{ opacity: 0 }, { opacity: 1 }],\n      options,\n    );\n\n    async function closed() {\n      dialogAnimation.reverse();\n      backdropAnimation.reverse();\n\n      await dialogAnimation.finished;\n\n      component.$destroy();\n    }\n\n    component.$on(\"close\", closed);\n    component.$on(\"select\", ({ detail }) => {\n      changes.update((changes) => {\n        changes.push({\n          type: ChangeType.Layout,\n          id: keyInfo.id,\n          layer: get(activeLayer),\n          action: detail,\n        });\n        return changes;\n      });\n      closed();\n    });\n  }\n\n  let focusKey: CompiledLayoutKey;\n  let groupParent: SVGElement;\n</script>\n\n<svelte:window on:keydown={navigate} />\n\n<svg\n  class=\"print\"\n  viewBox=\"0 0 {layoutInfo.size[0] * scale} {layoutInfo.size[1] * scale}\"\n  bind:this={groupParent}\n  transition:fly={{ y: 48, easing: expoOut }}\n>\n  {#each layoutInfo.keys as key, i}\n    <KeyboardKey\n      {i}\n      {key}\n      on:focusin={() => (focusKey = key)}\n      on:click={() => edit(i)}\n      on:keypress={({ key }) => {\n        if (key === \"Enter\") {\n          edit(i);\n        }\n      }}\n    />\n  {/each}\n</svg>\n\n<style lang=\"scss\">\n  svg {\n    overflow: visible;\n    grid-area: \"d\";\n    width: calc(min(100%, 35cm));\n    max-height: calc(100% - 170px);\n  }\n</style>\n","<script lang=\"ts\">\n  import { serialPort } from \"$lib/serial/connection\";\n  import { action } from \"$lib/title\";\n  import GenericLayout from \"$lib/components/layout/GenericLayout.svelte\";\n  import { getContext } from \"svelte\";\n  import type { Writable } from \"svelte/store\";\n  import type { VisualLayout } from \"$lib/serialization/visual-layout\";\n  import { fade } from \"svelte/transition\";\n\n  $: device = $serialPort?.device;\n  const activeLayer = getContext<Writable<number>>(\"active-layer\");\n\n  const layers = [\n    [\"Numeric Layer\", \"123\", 1],\n    [\"Primary Layer\", \"abc\", 0],\n    [\"Function Layer\", \"function\", 2],\n  ] as const;\n\n  const layouts = {\n    ONE: () =>\n      import(\"$lib/assets/layouts/one.yml\").then(\n        (it) => it.default as VisualLayout,\n      ),\n    TWO: () =>\n      import(\"$lib/assets/layouts/one.yml\").then(\n        (it) => it.default as VisualLayout,\n      ),\n    LITE: () =>\n      import(\"$lib/assets/layouts/lite.yml\").then(\n        (it) => it.default as VisualLayout,\n      ),\n    X: () =>\n      import(\"$lib/assets/layouts/generic/103-key.yml\").then(\n        (it) => it.default as VisualLayout,\n      ),\n  };\n</script>\n\n<div class=\"container\">\n  {#if device}\n    {#await layouts[device]() then visualLayout}\n      <fieldset transition:fade>\n        {#each layers as [title, icon, value]}\n          <button\n            class=\"icon\"\n            use:action={{ title, shortcut: `alt+${value + 1}` }}\n            on:click={() => ($activeLayer = value)}\n            class:active={$activeLayer === value}\n          >\n            {icon}\n          </button>\n        {/each}\n      </fieldset>\n\n      <GenericLayout {visualLayout} />\n    {/await}\n  {/if}\n</div>\n\n<style lang=\"scss\">\n  .container {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n\n    width: 100%;\n    height: 100%;\n    margin-bottom: 96px;\n  }\n\n  fieldset {\n    position: relative;\n\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    padding: 8px;\n\n    border: none;\n  }\n\n  button.icon {\n    cursor: pointer;\n\n    z-index: 1;\n\n    font-size: 24px;\n    color: var(--md-sys-color-on-surface-variant);\n\n    background: var(--md-sys-color-surface-variant);\n    border: none;\n\n    transition: all 250ms ease;\n\n    &:nth-child(2) {\n      z-index: 2;\n\n      aspect-ratio: 1;\n\n      font-size: 32px;\n\n      border-radius: 50%;\n    }\n\n    &:first-child,\n    &:last-child {\n      aspect-ratio: unset;\n      height: unset;\n    }\n\n    &:first-child {\n      margin-inline-end: -8px;\n      padding-inline: 4px 24px;\n      border-radius: 16px 0 0 16px;\n    }\n\n    &:last-child {\n      margin-inline-start: -8px;\n      padding-inline: 24px 4px;\n      border-radius: 0 16px 16px 0;\n    }\n\n    &.active {\n      font-weight: 900;\n      color: var(--md-sys-color-on-tertiary);\n      background: var(--md-sys-color-tertiary);\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import { share } from \"$lib/share\";\n  import tippy from \"tippy.js\";\n  import { setContext } from \"svelte\";\n  import Layout from \"$lib/components/layout/Layout.svelte\";\n  import { charaFileToUriComponent } from \"$lib/share/share-url\";\n  import SharePopup from \"../SharePopup.svelte\";\n  import type { VisualLayoutConfig } from \"$lib/components/layout/visual-layout\";\n  import { writable } from \"svelte/store\";\n  import { layout } from \"$lib/undo-redo\";\n\n  async function shareLayout(event: Event) {\n    const url = new URL(window.location.href);\n    url.searchParams.set(\n      \"import\",\n      await charaFileToUriComponent({\n        charaVersion: 1,\n        type: \"layout\",\n        device: \"one\",\n        layout: $layout.map((it) => it.map((it) => it.action)) as [\n          number[],\n          number[],\n          number[],\n        ],\n      }),\n    );\n    await navigator.clipboard.writeText(url.toString());\n    let shareComponent: SharePopup;\n    tippy(event.target as HTMLElement, {\n      onCreate(instance) {\n        const target = instance.popper.querySelector(\".tippy-content\")!;\n        shareComponent = new SharePopup({ target });\n      },\n      onHidden(instance) {\n        instance.destroy();\n      },\n      onDestroy() {\n        shareComponent.$destroy();\n      },\n    }).show();\n  }\n\n  setContext<VisualLayoutConfig>(\"visual-layout-config\", {\n    scale: 50,\n    inactiveScale: 0.5,\n    inactiveOpacity: 0.4,\n    strokeWidth: 1,\n    margin: 5,\n    fontSize: 9,\n    iconFontSize: 14,\n  });\n\n  setContext(\"active-layer\", writable(0));\n</script>\n\n<svelte:head>\n  <title>Layout Manager - CharaChorder Device Manager</title>\n  <meta name=\"description\" content=\"Edit your layout\" />\n</svelte:head>\n\n<svelte:window use:share={shareLayout} />\n\n<section>\n  <Layout />\n</section>\n\n<style lang=\"scss\">\n  section {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    width: 100%;\n    height: 100%;\n  }\n</style>\n"],"file":"_app/immutable/nodes/7.Va0aeRtl.js"}