{
  "version": 3,
  "sources": ["../../typesafe-i18n/svelte/index.mjs"],
  "sourcesContent": ["// src/index.mts\nimport { writable } from \"svelte/store\";\n\n// ../runtime/src/core-utils.mts\nvar getFallbackProxy = () => (\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  new Proxy(Object.assign(() => \"\", {}), {\n    get: (_target, key) => key === \"length\" ? 0 : getFallbackProxy()\n  })\n);\n\n// ../parser/src/basic.mts\nvar removeEmptyValues = (object) => Object.fromEntries(\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  Object.entries(object).map(([key, value]) => key !== \"i\" && value && value != \"0\" && [key, value]).filter(Boolean)\n);\nvar trimAllValues = (part) => Object.fromEntries(\n  Object.keys(part).map((key) => {\n    const val = part[key];\n    return [\n      key,\n      Array.isArray(val) ? val.map((v) => v?.trim()) : val === !!val ? val : val?.trim()\n    ];\n  })\n);\nvar parseArgumentPart = (text) => {\n  const [keyPart = \"\", ...formatterKeys] = text.split(\"|\");\n  const [keyWithoutType = \"\", type] = keyPart.split(\":\");\n  const [key, isOptional] = keyWithoutType.split(\"?\");\n  return { k: key, i: type, n: isOptional === \"\", f: formatterKeys };\n};\nvar isBasicPluralPart = (part) => !!(part.o || part.r);\nvar parsePluralPart = (content, lastAccessor) => {\n  let [key, values] = content.split(\":\");\n  if (!values) {\n    values = key;\n    key = lastAccessor;\n  }\n  const entries = values.split(\"|\");\n  const [zero, one, two, few, many, rest] = entries;\n  const nrOfEntries = entries.filter((entry) => entry !== void 0).length;\n  if (nrOfEntries === 1) {\n    return { k: key, r: zero };\n  }\n  if (nrOfEntries === 2) {\n    return { k: key, o: zero, r: one };\n  }\n  if (nrOfEntries === 3) {\n    return { k: key, z: zero, o: one, r: two };\n  }\n  return { k: key, z: zero, o: one, t: two, f: few, m: many, r: rest };\n};\nvar REGEX_SWITCH_CASE = /^\\{.*\\}$/;\nvar parseCases = (text) => Object.fromEntries(\n  removeOuterBrackets(text).split(\",\").map((part) => part.split(\":\")).reduce(\n    (accumulator, entry) => {\n      if (entry.length === 2) {\n        return [...accumulator, entry.map((entry2) => entry2.trim())];\n      }\n      ;\n      accumulator[accumulator.length - 1][1] += \",\" + entry[0];\n      return accumulator;\n    },\n    []\n  )\n);\nvar REGEX_BRACKETS_SPLIT = /(\\{(?:[^{}]+|\\{(?:[^{}]+)*\\})*\\})/g;\nvar removeOuterBrackets = (text) => text.substring(1, text.length - 1);\nvar parseRawText = (rawText, optimize = true, firstKey = \"\", lastKey = \"\") => rawText.split(REGEX_BRACKETS_SPLIT).map((part) => {\n  if (!part.match(REGEX_BRACKETS_SPLIT)) {\n    return part;\n  }\n  const content = removeOuterBrackets(part);\n  if (content.startsWith(\"{\")) {\n    return parsePluralPart(removeOuterBrackets(content), lastKey);\n  }\n  const parsedPart = parseArgumentPart(content);\n  lastKey = parsedPart.k || lastKey;\n  !firstKey && (firstKey = lastKey);\n  return parsedPart;\n}).map((part) => {\n  if (typeof part === \"string\")\n    return part;\n  if (!part.k)\n    part.k = firstKey || \"0\";\n  const trimmed = trimAllValues(part);\n  return optimize ? removeEmptyValues(trimmed) : trimmed;\n});\n\n// ../runtime/src/core.mts\nvar applyFormatters = (formatters, formatterKeys, initialValue) => formatterKeys.reduce(\n  (value, formatterKey) => (formatterKey.match(REGEX_SWITCH_CASE) ? ((cases) => cases[value] ?? cases[\"*\"])(parseCases(formatterKey)) : formatters[formatterKey]?.(value)) ?? value,\n  initialValue\n);\nvar getPlural = (pluralRules, { z, o, t, f, m, r }, value) => {\n  switch (z && value == 0 ? \"zero\" : pluralRules.select(value)) {\n    case \"zero\":\n      return z;\n    case \"one\":\n      return o;\n    case \"two\":\n      return t;\n    case \"few\":\n      return f ?? r;\n    case \"many\":\n      return m ?? r;\n    default:\n      return r;\n  }\n};\nvar REGEX_PLURAL_VALUE_INJECTION = /\\?\\?/g;\nvar applyArguments = (textParts, pluralRules, formatters, args) => textParts.map((part) => {\n  if (typeof part === \"string\") {\n    return part;\n  }\n  const { k: key = \"0\", f: formatterKeys = [] } = part;\n  const value = args[key];\n  if (isBasicPluralPart(part)) {\n    return ((typeof value === \"boolean\" ? value ? part.o : part.r : getPlural(pluralRules, part, value)) || \"\").replace(REGEX_PLURAL_VALUE_INJECTION, value);\n  }\n  const formattedValue = formatterKeys.length ? applyFormatters(formatters, formatterKeys, value) : value;\n  return (\"\" + (formattedValue ?? \"\")).trim();\n}).join(\"\");\nvar translate = (textParts, pluralRules, formatters, args) => {\n  const firstArg = args[0];\n  const isObject = firstArg && typeof firstArg === \"object\" && firstArg.constructor === Object;\n  const transformedArgs = args.length === 1 && isObject ? firstArg : args;\n  return applyArguments(textParts, pluralRules, formatters, transformedArgs);\n};\n\n// ../runtime/src/util.string.mts\nvar getPartsFromString = (cache, text) => cache[text] || (cache[text] = parseRawText(text));\n\n// ../runtime/src/util.object.mts\nvar getTranslateInstance = (locale, formatters) => {\n  const cache = {};\n  const pluralRules = new Intl.PluralRules(locale);\n  return (text, ...args) => translate(getPartsFromString(cache, text), pluralRules, formatters, args);\n};\nfunction i18nObject(locale, translations, formatters = {}) {\n  return createProxy(translations, getTranslateInstance(locale, formatters));\n}\nvar wrap = (proxyObject = {}, translateFn) => typeof proxyObject === \"string\" ? translateFn.bind(null, proxyObject) : Object.assign(\n  Object.defineProperty(() => \"\", \"name\", { writable: true }),\n  proxyObject\n);\nvar createProxy = (proxyObject, translateFn) => new Proxy(wrap(proxyObject, translateFn), {\n  get: (target, key) => {\n    if (key === Symbol.iterator)\n      return [][Symbol.iterator].bind(Object.values(target).map((entry) => wrap(entry, translateFn)));\n    return createProxy(target[key], translateFn);\n  }\n});\n\n// src/index.mts\nvar initI18nSvelte = (translations, formatters = {}) => {\n  const _locale = writable();\n  const _LL = writable(getFallbackProxy());\n  const locale = readonly(_locale);\n  const LL = new Proxy({}, {\n    get: (_target, key) => key === \"subscribe\" ? _LL.subscribe : _LL[key]\n  });\n  const setLocale = (newLocale) => {\n    _locale.set(newLocale);\n    _LL.set(i18nObject(newLocale, translations[newLocale], formatters[newLocale]));\n  };\n  return {\n    locale,\n    LL,\n    setLocale\n  };\n};\nfunction readonly(store) {\n  return {\n    // @ts-ignore\n    subscribe: store.subscribe.bind(store)\n  };\n}\nexport {\n  initI18nSvelte\n};\n"],
  "mappings": "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",
  "names": []
}
