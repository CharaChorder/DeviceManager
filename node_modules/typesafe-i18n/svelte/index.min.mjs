import{writable as A}from"svelte/store";var c=()=>new Proxy(Object.assign(()=>"",{}),{get:(e,t)=>t==="length"?0:c()});var S=e=>Object.fromEntries(Object.entries(e).map(([t,n])=>t!=="i"&&n&&n!="0"&&[t,n]).filter(Boolean)),k=e=>Object.fromEntries(Object.keys(e).map(t=>{let n=e[t];return[t,Array.isArray(n)?n.map(s=>s?.trim()):n===!!n?n:n?.trim()]})),$=e=>{let[t="",...n]=e.split("|"),[s="",r]=t.split(":"),[a,i]=s.split("?");return{k:a,i:r,n:i==="",f:n}},y=e=>!!(e.o||e.r),w=(e,t)=>{let[n,s]=e.split(":");s||(s=n,n=t);let r=s.split("|"),[a,i,o,l,b,L]=r,T=r.filter(R=>R!==void 0).length;return T===1?{k:n,r:a}:T===2?{k:n,o:a,r:i}:T===3?{k:n,z:a,o:i,r:o}:{k:n,z:a,o:i,t:o,f:l,m:b,r:L}},u=/^\{.*\}$/,m=e=>Object.fromEntries(g(e).split(",").map(t=>t.split(":")).reduce((t,n)=>n.length===2?[...t,n.map(s=>s.trim())]:(t[t.length-1][1]+=","+n[0],t),[])),d=/(\{(?:[^{}]+|\{(?:[^{}]+)*\})*\})/g,g=e=>e.substring(1,e.length-1),x=(e,t=!0,n="",s="")=>e.split(d).map(r=>{if(!r.match(d))return r;let a=g(r);if(a.startsWith("{"))return w(g(a),s);let i=$(a);return s=i.k||s,!n&&(n=s),i}).map(r=>{if(typeof r=="string")return r;r.k||(r.k=n||"0");let a=k(r);return t?S(a):a});var C=(e,t,n)=>t.reduce((s,r)=>(r.match(u)?(a=>a[s]??a["*"])(m(r)):e[r]?.(s))??s,n),j=(e,{z:t,o:n,t:s,f:r,m:a,r:i},o)=>{switch(t&&o==0?"zero":e.select(o)){case"zero":return t;case"one":return n;case"two":return s;case"few":return r??i;case"many":return a??i;default:return i}},D=/\?\?/g,E=(e,t,n,s)=>e.map(r=>{if(typeof r=="string")return r;let{k:a="0",f:i=[]}=r,o=s[a];return y(r)?((typeof o=="boolean"?o?r.o:r.r:j(t,r,o))||"").replace(D,o):(""+((i.length?C(n,i,o):o)??"")).trim()}).join(""),p=(e,t,n,s)=>{let r=s[0],a=r&&typeof r=="object"&&r.constructor===Object,i=s.length===1&&a?r:s;return E(e,t,n,i)};var P=(e,t)=>e[t]||(e[t]=x(t));var h=(e,t)=>{let n={},s=new Intl.PluralRules(e);return(r,...a)=>p(P(n,r),s,t,a)};function f(e,t,n={}){return F(t,h(e,n))}var B=(e={},t)=>typeof e=="string"?t.bind(null,e):Object.assign(Object.defineProperty(()=>"","name",{writable:!0}),e),F=(e,t)=>new Proxy(B(e,t),{get:(n,s)=>s===Symbol.iterator?[][Symbol.iterator].bind(Object.values(n).map(r=>B(r,t))):F(n[s],t)});var N=(e,t={})=>{let n=A(),s=A(c()),r=z(n),a=new Proxy({},{get:(o,l)=>l==="subscribe"?s.subscribe:s[l]});return{locale:r,LL:a,setLocale:o=>{n.set(o),s.set(f(o,e[o],t[o]))}}};function z(e){return{subscribe:e.subscribe.bind(e)}}export{N as initI18nSvelte};
